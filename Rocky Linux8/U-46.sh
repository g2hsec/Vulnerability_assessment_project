cat << EOF
===== [U-46] Set password minimum length              =====
=====                  Chaking...........               =====
EOF
echo "--------------------------------------------------------------------------" >> $target
echo "                        U-46 íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ ì„¤ì •              " >> $target
echo "--------------------------------------------------------------------------" >> $target-F: '{print $4}'
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "ì ê²€ëª©ì  : íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ ì„¤ì •ì´ ì ìš©ë˜ì–´ ìžˆëŠ”ì§€ ì ê²€í•˜ì—¬ ì§§ì€(8ìž ë¯¸ë§Œ) íŒ¨ìŠ¤ì›Œë“œ ê¸¸ì´ë¡œ ë°œìƒí•˜ëŠ” ì·¨ì•½ì ì„ ì´ìš©í•œ ê³µê²©(ë¬´ìž‘ìœ„ ëŒ€ìž… ê³µê²©, ì‚¬ì „ ëŒ€ìž… ê³µê²© ë“±)ì— ëŒ€í•œ ëŒ€ë¹„(ì‚¬ìš©ìž íŒ¨ìŠ¤ì›Œë“œ ìœ ì¶œ)ê°€ ë˜ì–´ ìžˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•¨" >> $target
echo "ë³´ì•ˆìœ„í˜‘ : íŒ¨ìŠ¤ì›Œë“œ ë¬¸ìžì—´ì´ ì§§ì€ ê²½ìš° ìœ ì¶”ê°€ ê°€ëŠ¥ í•  ìˆ˜ ìžˆìœ¼ë©° ì•”í˜¸í™”ëœ íŒ¨ìŠ¤ì›Œë“œ í•´ì‹œê°’ì„ ë¬´ìž‘ìœ„ ëŒ€ìž…ê³µê²©, ì‚¬ì „ëŒ€ìž… ê³µê²© ë“±ìœ¼ë¡œ ë‹¨ì‹œê°„ì— íŒ¨ìŠ¤ì›Œë“œ í¬ë ‰ì´ ê°€ëŠ¥í•¨" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì–‘í˜¸ ðŸ”˜: íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ê°€ 8ìž ì´ìƒìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìžˆëŠ” ê²½ìš° " >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì·¨ì•½ ðŸš«: íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ê°€ 8ìž ë¯¸ë§Œìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìžˆëŠ” ê²½ìš°" >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "" >> $target
u46_Account_Management=0
u46_safe_check=0
u46=0
if [ -f "/etc/pamd.d/system-auth" ];then
    u46_systemauth_min=$(grep -v "^\s*#" "/etc/pam.d/system-auth" | grep -iE "^\s*password" | grep -i "min|minlen" | grep -oP 'min=\K\d+|minlen=\K\d+')
    if [ -n "$u46_systemauth_min" ];then
        echo "/etc/pam.d/system-auth íŒŒì¼ë‚´ì— íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ ì˜µì…˜ê°’ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
        if [ $u46_systemauth_min -gt 90 ];then
            echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ ì„¤ì •ì´ 90 ì´ìƒìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
            echo "í˜„ìž¬ ì„¤ì • ê°’ : $u46_systemauth_min" >> $target
            u46_safe_check=$((u46_safe_check+1)) 
        else
            echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ ì„¤ì •ì´ 90 ì´í•˜ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        fi
    else
        echo ""/etc/pam.d/system-auth íŒŒì¼ë‚´ì— íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ ì˜µì…˜ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."" >> $target
    fi
fi
if [ -f "/etc/security/pwquality.conf" ];then
    echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œê¸¸ì´ ì„¤ì •íŒŒì¼ì¸ /etc/security/pwquality.conf íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
    u46_pwqualuty_passlen=$(grep -v "^\s*#" "/etc/security/pwquality.conf" | grep -i "minlen" | awk -F= '{print $2}' | tr -d ' ')
    if [ -n "$u46_pwqualuty_passlen" ];then
        if [ $u46_pwqualuty_passlen -lt 8 ];then
            echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ê°€ 8ë¯¸ë§Œìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
            echo "í˜„ìž¬ ì„¤ì • ê°’ : $u46_pwqualuty_passlen" >> $target
            u46_safe_check=$((u46_safe_check+1)) 
        else
            echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ê°€ 8ì´ìƒìœ¼ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        fi
    else
        echo "/etc/security/pwquality.conf íŒŒì¼ì€ ì¡°ìž¬í•˜ì§€ë§Œ ê´€ë ¨ ì„¤ì •ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
    fi
else
    echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œê¸¸ì´ ì„¤ì •íŒŒì¼ì¸ /etc/security/pwquality.conf íŒŒì¼ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
fi
if [ -f "/etc/login.defs" ];then
    echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œê¸¸ì´ ì„¤ì •íŒŒì¼ì¸ /etc/login.defs íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤.">> $target
    u46_logindefs_passlen=$(grep -v "^\s*#" "/etc/login.defs" | grep -i "pass_min_len" | awk '{print $2}')
    if [ -n "$u46_logindefs_passlen" ];then
        if [ $u46_logindefs_passlen -lt 8 ];then
            echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ê°€ 8ë¯¸ë§Œìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
            echo "í˜„ìž¬ ì„¤ì • ê°’ : $u46_logindefs_passlen" >> $target
            u46_safe_check=$((u46_safe_check+1)) 
        else
            echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œ ê¸¸ì´ê°€ 8ì´ìƒìœ¼ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        fi
    else
        echo "/etc/login.defs íŒŒì¼ì€ ì¡°ìž¬í•˜ì§€ë§Œ ê´€ë ¨ ì„¤ì •ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
        u46_safe_check=$((u46_safe_check+1)) 
    fi
else
    echo "íŒ¨ìŠ¤ì›Œë“œ ìµœì†Œê¸¸ì´ ì„¤ì •íŒŒì¼ì¸ /etc/login.defs íŒŒì¼ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
fi
if [ $u46_safe_check -ge 1 ];then
    u46=$((u46+1))
    echo "ì ê²€ ê²°ê³¼ : ì·¨ì•½" >> $result
else
    echo "ì ê²€ ê²°ê³¼ : ì–‘í˜¸" >> $result
fi
if [[ $u46 -ge 1 ]];then
    Mid=$((Mid+1))
    Account_Management=$((Account_Management+1))
    u46_Account_Management=1
fi