cat << EOF
===== [U-34] DNS Area Transfer Settings              =====
=====                  Chaking...........               =====
EOF
echo "--------------------------------------------------------------------------" >> $target
echo "                        U-34 DNS Zone Transfer ì„¤ì •              " >> $target
echo "--------------------------------------------------------------------------" >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "+ì ê²€ëª©ì  : í—ˆê°€ë˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìžì—ê²Œ Zone Transferë¥¼ ì œí•œí•¨ìœ¼ë¡œì¨ í˜¸ìŠ¤íŠ¸ ì •ë³´, ì‹œìŠ¤í…œ ì •ë³´ ë“± ì •ë³´ ìœ ì¶œì˜ ë°©ì§€ë¥¼ ëª©ì ìœ¼ë¡œ í•¨" >> $target
echo "+ë³´ì•ˆìœ„í˜‘ : ë¹„ì¸ê°€ìž Zone Transferë¥¼ ì´ìš©í•´ Zone ì •ë³´ë¥¼ ì „ì†¡ë°›ì•„ í˜¸ìŠ¤íŠ¸ ì •ë³´, ì‹œìŠ¤í…œ ì •ë³´, ë„¤íŠ¸ì›Œí¬ êµ¬ì„± í˜•íƒœ ë“±ì˜ ë§Žì€ ì •ë³´ë¥¼ íŒŒì•…í•  ìˆ˜ ìžˆìŒ" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì–‘í˜¸ ðŸ”˜: DNS ì„œë¹„ìŠ¤ ë¯¸ì‚¬ìš© ë˜ëŠ”, Zone Transferë¥¼ í—ˆê°€ëœ ì‚¬ìš©ìžì—ê²Œë§Œ í—ˆìš©í•œ ê²½ìš°" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì·¨ì•½ ðŸš«: DNS ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ë©° Zone Transferë¥¼ ëª¨ë“  ì‚¬ìš©ìžì—ê²Œ í—ˆìš©í•œ ê²½ìš°" >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "" >> $target
u34=0
u34_Service_Management=0
u34_safe_check=0
u34_services=("named" "dnsmasq" "unbound" "pdns_server" "bind9.service" "pdns_server" "bind9" "dnsmasq.service" "unbound.service" "pdns.service")
u34_ports=("53" "853 " "443")

check_service_status "${u34_ports}" "${u34_services[@]}"
if [[ $? -eq 1 ]]; then
    echo "DNS ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìžˆìŠµë‹ˆë‹¤." >> $target
    if grep -vE "^\s*#" "/etc/named.conf" | grep -qi "allow-transfer";then
        echo "íŠ¹ì • ipì— ëŒ€í•´ì„œ Zone Transferë¥¼ í—ˆìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        echo "í˜„ìž¬ Zone Transfer ì„¤ì • ê°’ :$(grep -vE "^\s#" "/etc/named.conf" | grep -i "allow-transfer")" >> $target
    elif grep -vE "^\s*#" "/etc/named.conf" | grep -qi "xfrnets";then
        echo "íŠ¹ì • ipì— ëŒ€í•´ì„œ Zone Transfer í—ˆìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        echo "í˜„ìž¬ Zone Transfer ì„¤ì • ê°’ :$(grep -vE "^\s#" "/etc/named.conf" | grep -i "xfrnets")" >> $target
    else
        echo "allow-transfer ë° xfrnets ì˜µì…˜ì´ ì„¤ì •ë˜ì§€ ì•Šì•„ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ Zone Transferë¥¼ ìš”ì²­í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤" >> $target
        u34_safe_check=$((u34_safe_check+1))
    fi
else
    echo "DNS ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•˜ê³  ìžˆì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
    if grep -vE "^\s*#" "/etc/named.conf" | grep -qi "allow-transfer";then
        echo "íŠ¹ì • ipì— ëŒ€í•´ì„œ Zone Transferë¥¼ í—ˆìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        echo "$(grep -vE "^\s*#" "/etc/named.conf" | grep -i "allow-transfer")" >> $target
    elif grep -vE "^\s#" "/etc/named.conf" | grep -qi "xfrnets";then
        echo "íŠ¹ì • ipì— ëŒ€í•´ì„œ Zone Transfer í—ˆìš©í•˜ë„ë¡ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
        echo "$(grep -vE "^\s*#" "/etc/named.conf" | grep -i "xfrnets")" >> $target
    else
        echo "allow-transfer ë° xfrnets ì˜µì…˜ì´ ì„¤ì •ë˜ì§€ ì•Šì•„ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ê°€ Zone Transferë¥¼ ìš”ì²­í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤" >> $target
        u34_safe_check=$((u34_safe_check+1))
    fi
    echo "DNS(named) ë¹„í™œì„±í™” ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
fi

if [[ $u34_safe_check -ge 1 ]];then
    u34=$((u34+1))
    echo "ì ê²€ ê²°ê³¼ : ì·¨ì•½" >> $result
else
    echo "ì ê²€ ê²°ê³¼ : ì–‘í˜¸" >> $result
fi
if [[ $u34 -ge 1 ]];then
    High=$((High+1))
    Service_Management=$((Service_Management+1))
    u34_Service_Management=1
fi
