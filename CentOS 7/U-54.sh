cat << EOF
===== [U-54] Session timeout setting              =====
=====                  Chaking...........               =====
EOF
echo "--------------------------------------------------------------------------" >> $target
echo "                        U-54 Session Timeout ì„¤ì •             " >> $target
echo "--------------------------------------------------------------------------"  >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "ì ê²€ëª©ì  : ì‚¬ìš©ìžì˜ ê³ ì˜ ë˜ëŠ” ì‹¤ìˆ˜ë¡œ ì‹œìŠ¤í…œì— ê³„ì •ì´ ì ‘ì†ëœ ìƒíƒœë¡œ ë°©ì¹˜ë¨ì„ ì°¨ë‹¨í•˜ê¸° ìœ„í•¨" >> $target
echo "ë³´ì•ˆìœ„í˜‘ : Session timeout ê°’ì´ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš° ìœ íœ´ ì‹œê°„ ë‚´ ë¹„ì¸ê°€ìžì˜ ì‹œìŠ¤í…œ ì ‘ê·¼ìœ¼ë¡œ ì¸í•´ ë¶ˆí•„ìš”í•œ ë‚´ë¶€ ì •ë³´ì˜ ë…¸ì¶œ ìœ„í—˜ì´ ì¡´ìž¬í•¨" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì–‘í˜¸ ðŸ”˜: Session Timeoutì´ 600ì´ˆ(10ë¶„) ì´í•˜ë¡œ ì„¤ì •ë˜eì–´ ìžˆëŠ” ê²½ìš°" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì·¨ì•½ ðŸš«: Session Timeoutì´ 600ì´ˆ(10ë¶„) ì´í•˜ë¡œ ì„¤ì •ë˜ì§€ ì•Šì€ ê²½ìš°" >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "" >> $target
u54_Account_Management=0
u54_safe_check=0
u54=0
u54_files=("/etc/bash.bashrc" "/etc/zsh/zshrc" "/etc/ksh.kshrc" "/etc/profile" "/etc/.profile")
u54_individual_files=(".bashrc" ".zshrc" ".kshrc" ".bash_profile")
u54_dirs=("/etc/profile.d/*.sh" "/etc/profile.d/*.csh" "/etc/profil.d/*.ksh")
u54_csh_files=("/etc/csh.cshrc" "/etc/csh.login")
u54_csh_individual_files=(".cshrc" ".login")
u54_check_users=($(awk -F':' '!/\/sbin|false|sync/ {print $1}' /etc/passwd))

for u54_check_dir in ${u54_dirs[@]}; do
    for u54_dir in $u54_check_dir; do
        if [ -e "$u54_dir" ]; then
            echo "$u54_dir íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
            u54_dir_tmoutsh=$(grep -Ev "^\s*#" "$u54_dir" | grep -Ei "^\s*TMOUT" | tr -d ' ' | awk -F'=' '{print $2}')
            if [ -n "$u54_dir_tmoutsh" ]; then
                echo "$u54_dir íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
                if [ "$u54_dir_tmoutsh" -le 600 ]; then
                    echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 600ì´í•˜ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                    echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_dir_tmoutsh" >> $target
                else   
                    echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 600ì´ìƒìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                    echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_dir_tmoutsh" >> $target
                    u54_safe_check=$((u54_safe_check+1))
                fi
            else
                echo "$u54_dir íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
                u54_safe_check=$((u54_safe_check+1))
            fi
        fi
    done
done

for u54_file in "${u54_files[@]}"; do
    if [ -e "$u54_file" ]; then
        echo "$u54_file íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
        u54_file_tmout=$(grep -Ev "^\s*#" "$u54_file" | grep -Ei "^\s*TMOUT" | tr -d ' ' | awk -F'=' '{print $2}')
        if [ -n "$u54_file_tmout" ]; then
            echo "$u54_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
            if [ "$u54_file_tmout" -le 600 ]; then
                echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 600ì´í•˜ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_file_tmout" >> $target
            else   
                echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 600ì´ìƒìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_file_tmout" >> $target
                u54_safe_check=$((u54_safe_check+1))
            fi
        else
            echo "$u54_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
            u54_safe_check=$((u54_safe_check+1))
        fi
    fi
done

for u54_csh_file in "${u54_csh_files[@]}"; do
    if [ -e "$u54_csh_file" ]; then
        echo "$u54_csh_file íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
        u54_cshfile_tmout=$(grep -Ev "^\s*#" "$u54_csh_file" | grep -Ei "^\s*set\s*autologout" | tr -d ' ' | awk -F'=' '{print $2}')
        if [ -n "$u54_cshfile_tmout" ]; then
            echo "$u54_csh_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
            if [ "$u54_cshfile_tmout" -le 10 ]; then
                echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 10ì´í•˜ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_cshfile_tmout" >> $target
            else   
                echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 10ì´ìƒìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_cshfile_tmout" >> $target
                u54_safe_check=$((u54_safe_check+1))
            fi
        else
            echo "$u54_csh_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
            u54_safe_check=$((u54_safe_check+1))
        fi
    fi
done

for u54_check_user in "${u54_check_users[@]}"; do
    u54_user_home=$(getent passwd "$u54_check_user" | awk -F':' '{print $6}')
    if [ -d "$u54_user_home" ]; then
        echo "--------------------------------------"  >> $target
        echo "$u54_check_user ì˜ í™ˆ ë””ë ‰í„°ë¦¬ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
        for u54_individual_file in "${u54_individual_files[@]}"; do
            echo -e "Checking file: $u54_user_home/$u54_individual_file"  >> $target
            if [ -e "$u54_user_home/$u54_individual_file" ]; then
                echo "$u54_user_home/$u54_individual_file íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤."  >> $target
                u54_check_timeout=$(grep -Ev "^\s*#" "$u54_user_home/$u54_individual_file" | grep -Ei "^\s*TMOUT" | tr -d ' ' | awk -F'=' '{print $2}')
                if [ -n "$u54_check_timeout" ]; then
                    echo "$u54_user_home/$u54_individual_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
                    if [ "$u54_check_timeout" -le 600 ]; then
                        echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 600ì´í•˜ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                        echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_check_timeout" >> $target
                    else   
                        echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 600ì´ìƒìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                        echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_check_timeout" >> $target
                        u54_safe_check=$((u54_safe_check+1))
                    fi
                else
                    echo "$u54_user_home/$u54_individual_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
                    u54_safe_check=$((u54_safe_check+1))
                fi
            else
                echo "$u54_user_home/$u54_individual_file íŒŒì¼ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
            fi
        done
        for u54_csh_individual_file in "${u54_csh_individual_files[@]}"; do
            echo -e "Checking file: $u54_user_home/$u54_csh_individual_file"  >> $target
            if [ -e "$u54_user_home/$u54_csh_individual_file" ]; then
                echo "$u54_user_home/$u54_csh_individual_file íŒŒì¼ì´ ì¡´ìž¬í•©ë‹ˆë‹¤."  >> $target
                u54_check_timeout=$(grep -Ev "^\s*#" "$u54_user_home/$u54_csh_individual_file" | grep -Ei "^\s*set\s*autologout" | tr -d ' ' | awk -F'=' '{print $2}')
                if [ -n "$u54_check_timeout" ]; then
                    echo "$u54_user_home/$u54_csh_individual_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•©ë‹ˆë‹¤." >> $target
                    if [ "$u54_check_timeout" -le 10 ]; then
                        echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 10ì´í•˜ë¡œ ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                        echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_check_timeout" >> $target
                    else   
                        echo "ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ 10ì´ìƒìœ¼ë¡œ ë¶€ì ì ˆí•˜ê²Œ ì„¤ì •ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                        echo "í˜„ìž¬ ì„¤ì • ê°’ : $u54_check_timeout" >> $target
                        u54_safe_check=$((u54_safe_check+1))
                    fi
                else
                    echo "$u54_user_home/$u54_csh_individual_file íŒŒì¼ì— ì„¸ì…˜ íƒ€ìž„ì•„ì›ƒ ì„¤ì • ê°’ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
                    u54_safe_check=$((u54_safe_check+1))
                fi
            else
                echo "$u54_user_home/$u54_csh_individual_file íŒŒì¼ì´ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
            fi
        done
    else
        echo "$u54_check_user ì˜ í™ˆ ë””ë ‰í„°ë¦¬ê°€ ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
    fi
done

if [ $u54_safe_check -ge 1 ];then
    u54=$((u54+1))
    echo "ì ê²€ ê²°ê³¼ : ì·¨ì•½" >> $result
else
    echo "ì ê²€ ê²°ê³¼ : ì–‘í˜¸" >> $result
fi
if [[ $u54 -ge 1 ]];then
    Low=$((Low+1))
    Account_Management=$((Account_Management+1))
    u54_Account_Management=1
fi