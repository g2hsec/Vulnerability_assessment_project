cat << EOF
===== [U-51] Prohibiting GIDs whose accounts do not exist              =====
=====                  Chaking...........               =====
EOF
echo "--------------------------------------------------------------------------" >> $target
echo "                        U-51 ê³„ì •ì´ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” GID ê¸ˆì§€              " >> $target
echo "--------------------------------------------------------------------------"  >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "ì ê²€ëª©ì  : ì‹œìŠ¤í…œì— ë¶ˆí•„ìš”í•œ ê·¸ë£¹ì´ ì¡´ìž¬í•˜ëŠ”ì§€ ì ê²€í•˜ì—¬ ë¶ˆí•„ìš”í•œ ê·¸ë£¹ì˜ ì†Œìœ ê¶Œìœ¼ë¡œ ì„¤ì •ë˜ì–´ ìžˆëŠ” íŒŒì¼ì˜ ë…¸ì¶œì— ì˜í•´ ë°œìƒí•  ìˆ˜ ìžˆëŠ” ìœ„í—˜ì— ëŒ€í•œ ëŒ€ë¹„ê°€ ë˜ì–´ ìžˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•¨" >> $target
echo "ë³´ì•ˆìœ„í˜‘ : ê³„ì •ì´ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ê·¸ë£¹ì€ í˜„ìž¬ ì‚¬ìš©ë˜ê³  ìžˆëŠ” ê·¸ë£¹ì´ ì•„ë‹Œ ë¶ˆí•„ìš”í•œ ê·¸ë£¹ìœ¼ë¡œ ì‚­ì œ ì¡°ì¹˜ê°€ í•„ìš”í•¨" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì–‘í˜¸ ðŸ”˜: ì‹œìŠ¤í…œ ê´€ë¦¬ë‚˜ ìš´ìš©ì— ë¶ˆí•„ìš”í•œ ê·¸ë£¹ì´ ì‚­ì œ ë˜ì–´ìžˆëŠ” ê²½ìš°" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì·¨ì•½ ðŸš«: ì‹œìŠ¤í…œ ê´€ë¦¬ë‚˜ ìš´ìš©ì— ë¶ˆí•„ìš”í•œ ê·¸ë£¹ì´ ì¡´ìž¬í•  ê²½ìš°" >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "" >> $target
u51_Account_Management=0
u51_safe_check=0
u51=0
# /etc/passwd íŒŒì¼ì—ì„œ GID ëª©ë¡ ì¶”ì¶œ
u51_gid_list=$(cut -d: -f4 /etc/passwd | sort -u)

echo "ê³„ì •ì´ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ê·¸ë£¹ì´ ì¡´ìž¬í•  ê²½ìš° ì•„ëž˜ì— ì¶œë ¥ë©ë‹ˆë‹¤." >> $target  

# GID ëª©ë¡ì„ ìˆœíšŒí•˜ë©´ì„œ /etc/groupì— ì—†ëŠ” GID ì°¾ê¸° 
for u51_gid in $u51_gid_list; do
    if ! grep -q ":$u51_gid:" /etc/group; then
        echo "GID $u51_gid ëŠ” /etc/groupì— ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
        u51_safe_check=$((u51_safe_check+1))
    fi
done

# /etc/group íŒŒì¼ì„ ìˆœíšŒí•˜ë©´ì„œ ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìž ì°¾ê¸°
echo "ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìž ëª©ë¡ì´ ì¡´ìž¬í•  ê²½ìš° ì•„ëž˜ì— ì¶œë ¥ë©ë‹ˆë‹¤." >> $target
u51_count=0
while IFS=: read -r u51_group_name _ _ u51_group_users; do
    IFS=',' read -ra u51_users <<< "$u51_group_users"
    for u51_user in "${u51_users[@]}"; do
        if [[ -n "$u51_user" ]] && ! grep -q "^$u51_user:" /etc/passwd; then
            echo "ê·¸ë£¹ $u51_group_name ì— ì†í•œ ì‚¬ìš©ìž $u51_user ëŠ” /etc/passwdì— ì¡´ìž¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." >> $target
            u51_safe_check=$((u51_safe_check+1))
        else
            u51_count=$((u51_count+1))
        fi
    done
done < /etc/group

if [[ $u51_count -ge 1 ]];then
    echo "ê°ê°ì˜ ê·¸ë£¹ ë‚´ì— ì¡´ìž¬í•˜ì§€ ì•ŠëŠ” ì‚¬ìš©ìžëŠ” ì—†ìŠµë‹ˆë‹¤." >> $target
fi

if [ $u51_safe_check -ge 1 ];then
    u51=$((u51+1))
    echo "ì ê²€ ê²°ê³¼ : ì·¨ì•½" >> $result
else
    echo "ì ê²€ ê²°ê³¼ : ì–‘í˜¸" >> $result
fi
if [[ $u51 -ge 1 ]];then
    Low=$((Low+1))
    Account_Management=$((Account_Management+1))
    u51_Account_Management=1
fi