cat << EOF
===== [U-57] Set Home Directory Owners and Permissions              =====
=====                  Chaking...........               =====
EOF
echo "--------------------------------------------------------------------------" >> $target
echo "                        U-57  í™ˆë””ë ‰í† ë¦¬ ì†Œìœ ìž ë° ê¶Œí•œ ì„¤ì •             " >> $target
echo "--------------------------------------------------------------------------"  >> $target
echo "++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "ì ê²€ëª©ì  : ì‚¬ìš©ìž í™ˆ ë””ë ‰í„°ë¦¬ ë‚´ ì„¤ì •íŒŒì¼ì´ ë¹„ì¸ê°€ìžì— ì˜í•œ ë³€ì¡°ë¥¼ ë°©ì§€í•¨" >> $target
echo "ë³´ì•ˆìœ„í˜‘ : í™ˆ ë””ë ‰í„°ë¦¬ ë‚´ ì„¤ì •íŒŒì¼ ë³€ì¡° ì‹œ ì •ìƒì ì¸ ì„œë¹„ìŠ¤ ì´ìš©ì´ ì œí•œë  ìš°ë ¤ê°€ ì¡´ìž¬í•¨" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì–‘í˜¸ ðŸ”˜: í™ˆ ë””ë ‰í„°ë¦¬ ì†Œìœ ìžê°€ í•´ë‹¹ ê³„ì •ì´ê³ , íƒ€ ì‚¬ìš©ìž ì“°ê¸° ê¶Œí•œì´ ì œê±°ëœ ê²½ìš°" >> $target
echo "+íŒë‹¨ê¸°ì¤€ ì·¨ì•½ ðŸš«: í™ˆ ë””ë ‰í„°ë¦¬ ì†Œìœ ìžê°€ í•´ë‹¹ ê³„ì •ì´ ì•„ë‹ˆê³ , íƒ€ ì‚¬ìš©ìž ì“°ê¸° ê¶Œí•œì´ ë¶€ì—¬ëœ  ê²½ìš°" >> $target
echo "+++++++++++++++++++++++++++++++++++++++++++++++++++++++++ff+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++" >> $target
echo "" >> $target
u57_Files_Directory_Management=0
u57_safe_check=0
u57=0
u57_check_users=($(awk -F':' '!/sbin|sync|false/ {print $1}' /etc/passwd))

for u57_check_user in "${u57_check_users[@]}"; do
    u57_user_home=$(getent passwd "$u57_check_user" | awk -F':' '{print $6}')
    if [ -d "$u57_user_home" ]; then
        echo "--------------------------------------"   >> $target
        echo "$u57_check_user ì˜ í™ˆ ë””ë ‰í„°ë¦¬ê°€ ì¡´ìž¬í•©ë‹ˆë‹¤."  >> $target
        u57_dir_owner=$(stat -c "%U" "$u57_user_home")
        u57_dir_other=$(stat -c "%A" "$u57_user_home" | awk '{print substr($0, length($0)-1)}' | grep -i "w")
        if [ "$u57_dir_owner" == "$u57_check_user" ];then
            if [ -n "$u57_dir_other" ];then
                echo "í™ˆ ë””ë ‰í„°ë¦¬ì˜ ê¸°íƒ€ ì‚¬ìš©ìž(Other)ì— ëŒ€í•œ ì“°ê¸° ê¶Œí•œì´ ë¶€ì—¬ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                echo "í˜„ìž¬ ì„¤ì •ê°’ : $u57_dir_other" >> $target
                u57_safe_check=$((u57_safe_check+1))
            else
                echo "í™ˆ ë””ë ‰í„°ë¦¬ ì†Œìœ ìžê°€ í•´ë‹¹ ê³„ì •ìœ¼ë¡œ ë˜ì–´ ìžˆìœ¼ë©°, íƒ€ ì‚¬ìš©ìž ì“°ê¸° ê¶Œí•œì´ ì œê±°ë˜ì–´ ìžˆìŠµë‹ˆë‹¤." >> $target
                echo "í˜„ìž¬ ì„¤ì •ê°’ : $u57_dir_owner , $(stat -c "%A" "$u57_user_home")" >> $target
            fi
        else
            echo "í™ˆ ë””ë ‰í„°ë¦¬ ì†Œìœ ìžê°€ í•´ë‹¹ ê³„ì •ì´ ì•„ë‹™ë‹ˆë‹¤." >> $target
            echo "í˜„ìž¬ ì„¤ì •ê°’ : $u57_dir_owner" >> $target
            u57_safe_check=$((u57_safe_check+1))
        fi
    fi 
done

if [[ $u57_safe_check -ge 1 ]];then
    u57=$((u57+1))
    echo "ì ê²€ ê²°ê³¼ : ì·¨ì•½" >> $result
else
    echo "ì ê²€ ê²°ê³¼ : ì–‘í˜¸" >> $result
fi
if [[ $u57 -ge 1 ]];then
    Mid=$((Mid+1))
    Files_Directory_Management=$((Files_Directory_Management+1))
    u57_Files_Directory_Management=1
fi